<!DOCTYPE html>
<html lang="vi">
<head>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.3/dist/umd/supabase.min.js"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-92KE83JEYM');
    </script>
    <meta charset="utf-8" />
    <title>B·∫£ng Th√¥ng B√°o BTVN</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <meta name="description" content="B·∫£ng th√¥ng b√°o b√†i t·∫≠p v·ªÅ nh√† v√† th·ªùi kh√≥a bi·ªÉu" />
    
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìò</text></svg>">
    
    <meta name="theme-color" content="#0066cc">
    <link rel="apple-touch-icon" href="icon.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
      // ‚öôÔ∏è C·∫•u h√¨nh Supabase (Gi·ªØ nguy√™n)
      const SUPABASE_URL = "https://nlmwiyoplederbthjvzz.supabase.co";
      const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sbXdpeW9wbGVkZXJidGhqdnp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MzYxOTEsImV4cCI6MjA3ODQxMjE5MX0.fzyVeeLaSnYJyaIv63i9C7q6C-9UqtmL1HZuNYP-FJE";
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
    </script>
    <link rel="manifest" href="/TBBTVN8A4TTHCSGB/manifest.json">
    <meta name="theme-color" content="#0a84ff">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="/TBBTVN8A4TTHCSGB/icons/icon-192.png">

    <script>
    // ƒëƒÉng k√Ω service worker (t·∫°o sw.js ·ªü g·ªëc site n·∫øu ch∆∞a c√≥)
    if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/TBBTVN8A4TTHCSGB/sw.js')
      .catch(err => console.error('SW register failed:', err));
    }
    </script>

    <style>
    .a2hs-guide{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.45); z-index:2000; }
    .a2hs-guide.hidden{ display:none; }
    .a2hs-card{ background:var(--card,#fff); padding:18px; border-radius:12px; max-width:420px; width:90%; box-shadow:0 12px 40px rgba(0,0,0,0.3); position:relative; }
    .a2hs-close{ position:absolute; right:12px; top:12px; background:transparent; border:none; font-size:18px; cursor:pointer; }
    .a2hs-card h3{ margin-top:0; margin-bottom:8px; }
    .a2hs-card ol{ padding-left:1.2em; margin:0 0 12px 0; }
    .a2hs-card .btn.btn-android{ display:inline-block; padding:10px 14px; border-radius:8px; background:linear-gradient(180deg,#22c55e,#16a34a); color:#fff; border:none; cursor:pointer; }
    </style>
</head>
<script>
  const isError = false;
  if (isError) {
    window.location.href = "bigerror.html";
  }
</script>
<script src="/TBBTVN8A4TTHCSGB/assets/app-banner.js" defer></script>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">ƒêang t·∫£i b·∫£ng th√¥ng b√°o...</div>
    </div>

    <div class="theme-loading" id="themeLoading">
        <div class="theme-loading-spinner"></div>
        <div class="theme-loading-text">ƒêang √°p d·ª•ng ch·ªß ƒë·ªÅ...</div>
    </div>

    <canvas id="sky"></canvas>
    <div id="fireworks-container"></div>

    <header class="main-header">
        <div class="header-content">
            <h1 class="header-title">B·∫£ng th√¥ng b√°o</h1>
            
            <nav class="header-nav" role="tablist" aria-label="ƒêi·ªÅu h∆∞·ªõng ch√≠nh">
                <button role="tab" aria-selected="true" aria-controls="btvn-panel" data-tab="btvn">
                    <i class="fas fa-tasks" aria-hidden="true"></i>
                    <span>BTVN</span>
                </button>
                <button role="tab" aria-selected="false" aria-controls="tkb-panel" data-tab="tkb">
                    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                    <span>TKB</span>
                </button>
                <button role="tab" aria-selected="false" aria-controls="changelog-panel" data-tab="changelog">
                    <i class="fas fa-history" aria-hidden="true"></i>
                    <span>Thay ƒë·ªïi</span>
                </button>
            </nav>

            <div class="header-actions">
                <button id="refreshBtn" class="menu-btn" title="L√†m m·ªõi d·ªØ li·ªáu" aria-label="L√†m m·ªõi d·ªØ li·ªáu">
                    <i class="fas fa-sync-alt" aria-hidden="true"></i>
                </button>
                <button class="menu-btn" id="menuBtn" aria-expanded="false" aria-controls="menuPanel" title="M·ªü menu">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </header>
    
<div id="app-announcement" class="popup hidden" role="dialog" aria-modal="true" aria-labelledby="app-popup-title">
    <div class="popup-card app-popup-card">
        <button id="dismiss-banner" class="close" aria-label="ƒê√≥ng">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        <div class="app-icon" aria-hidden="true">
            <svg width="56" height="56" viewBox="0 0 24 24" aria-hidden="true">
                <rect rx="6" ry="6" width="24" height="24" fill="#0ea5a4"></rect>
                <text x="12" y="16" font-size="10" text-anchor="middle" fill="white" font-family="Arial, sans-serif">APP</text>
            </svg>
        </div>
        <h3 id="app-popup-title">ƒê√£ c√≥ app tr√™n iOS v√† Android</h3>
        <p class="app-card-desc">
            C√†i ƒë·∫∑t ·ª©ng d·ª•ng ƒë·ªÉ m·ªü nhanh v√† m∆∞·ª£t h∆°n. Th√¥ng b√°o n√†y s·∫Ω ch·ªâ xu·∫•t hi·ªán 1 l·∫ßn/tu·∫ßn.
        </p>
        <div class="app-buttons">
            <button id="btn-ios" class="btn btn-ios" role="button">
                <i class="fab fa-apple"></i> T·∫£i cho iOS
            </button>
            <a id="btn-android" class="btn btn-android" href="#" data-android-url="https://duyanh662.github.io/TBBTVN8A4TTHCSGB/" role="button" aria-label="C√†i ƒë·∫∑t Android">
                <i class="fab fa-android"></i> C√†i ƒë·∫∑t Android
            </a>
        </div>
    </div>
</div>

    <div id="a2hs-guide" class="a2hs-guide hidden" role="dialog" aria-hidden="true">
      <div class="a2hs-card">
        <button id="a2hs-close" class="a2hs-close" aria-label="ƒê√≥ng">‚úï</button>
        <h3>Th√™m v√†o M√†n h√¨nh ch√≠nh (Android)</h3>
        <ol>
          <li>M·ªü menu tr√¨nh duy·ªát (‚ãÆ)</li>
          <li>Ch·ªçn "Add to Home screen" ho·∫∑c "Th√™m v√†o M√†n h√¨nh ch√≠nh"</li>
          <li>L√†m theo h∆∞·ªõng d·∫´n ƒë·ªÉ th√™m ·ª©ng d·ª•ng</li>
        </ol>
        <button id="a2hs-ok" class="btn btn-android">ƒê√£ hi·ªÉu</button>
      </div>
    </div>

    <div class="menu-panel" id="menuPanel" role="menu" aria-hidden="true">
        <button id="menuDark" role="menuitem" aria-label="Chuy·ªÉn Dark/Light">
            <i class="fas fa-moon" aria-hidden="true"></i>
            <span>Dark Mode</span>
        </button>
        <button id="menuLiquid" role="menuitem" aria-label="Chuy·ªÉn Liquid Glass/Th∆∞·ªùng">
            <i class="fas fa-magic" aria-hidden="true"></i>
            <span>Liquid Glass</span>
        </button>
        <button id="menuPopup" role="menuitem" aria-label="B·∫≠t b·∫£ng L∆∞u √Ω">
            <i class="fas fa-info-circle" aria-hidden="true"></i>
            <span>B·∫≠t b·∫£ng L∆∞u √Ω</span>
        </button>
        <button id="menuAutoRefresh" role="menuitem" aria-label="B·∫≠t l√†m m·ªõi t·ª± ƒë·ªông">
            <i class="fas fa-sync-alt" aria-hidden="true"></i>
            <span>B·∫≠t l√†m m·ªõi t·ª± ƒë·ªông</span>
        </button>
        <a href="Donate.html" target="_blank" class="donate-btn" role="menuitem">
            <i class="fas fa-heart" aria-hidden="true"></i>
            <span>Donate to us</span>
        </a>
        <a href="Report.html" class="report-link" role="menuitem">
            <i class="fas fa-bug" aria-hidden="true"></i>
            <span>Report</span>
        </a>
        <div class="color-theme-options">
            <div class="color-theme-title">Ch·ªçn m√†u ch·ªß ƒë·ªÅ:</div>
            <div class="color-themes" role="radiogroup" aria-label="Ch·ªçn m√†u ch·ªß ƒë·ªÅ">
                <div class="color-theme pink" data-theme="pink" title="H·ªìng" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme blue" data-theme="blue" title="Xanh d∆∞∆°ng" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme green" data-theme="green" title="Xanh l√°" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme fresh" data-theme="fresh" title="M√†u t∆∞∆°i" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme popular" data-theme="popular" title="M√†u nhi·ªÅu ng∆∞·ªùi th√≠ch nh·∫•t" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme white" data-theme="white" title="Tr·∫Øng" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme aquaviolet" data-theme="aquaviolet" title="Xanh ng·ªçc - T√≠m" role="radio" aria-checked="false" tabindex="0"></div>
                <div class="color-theme mint" data-theme="mint" title="Xanh b·∫°c h√†" role="radio"aria-checked="false" tabindex="0"></div>
            </div>
        </div>
    </div>

    <div class="popup" id="popup" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
        <div class="popup-card" id="popupCard">
            <button class="close" id="popupClose" aria-label="ƒê√≥ng popup">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
            <h3 id="popupTitle"><i class="fas fa-info-circle" aria-hidden="true"></i> L∆∞u √Ω</h3>
            <div class="popup-changelog">
                <div class="changelog-header">
                    <i class="fas fa-clipboard-list" aria-hidden="true"></i>
                    <span>Vui l√≤ng xem tr√™n status</span>
                </div>
                
                <div class="changelog-content">
                    <div class="change-category">
                        <div class="category-title">
                            <i class="fas fa-rocket" aria-hidden="true"></i>
                            <span>T√≠nh nƒÉng m·ªõi</span>
                        </div>
                        <ul class="change-list">
                            <li>Hi·ªán t·∫°i kh√¥ng c√≥!</li>
                        </ul>
                    </div>

                    <div class="change-category">
                        <div class="category-title">
                            <i class="fas fa-sync-alt" aria-hidden="true"></i>
                            <span>Thay ƒë·ªïi l·ªõn</span>
                        </div>
                        <ul class="change-list">
                            <li>Ph∆∞∆°ng th·ª©c update m·ªõi!</li>
                        </ul>
                    </div>
                    <div class="change-category">
                        <div class="category-title">
                            <i class="fas fa-tools" aria-hidden="true"></i>
                            <span>C·∫£i ti·∫øn & S·ª≠a l·ªói</span>
                        </div>
                        <ul class="change-list">
                            <li>Ph√¢n t√≠ch, s·ª≠a ch·ªØa v√† c·∫£i ti·∫øn th√™m nhi·ªÅu th·ª© kh√°c</li>
                        </ul>
                    </div>
                    <div class="change-category">
                        <div class="category-title">
                            <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
                            <span>‚ùóL∆∞u √Ω‚ùó</span>
                        </div>
                        <ul class="change-list">
                            <li>Mu·ªën b√°o l·ªói ho·∫∑c g√≥p √Ω vui l√≤ng nh·∫≠p b·∫•m n√∫t menu r·ªìi b·∫•m report nh·∫≠p th√¥ng tin b·∫°n mu·ªën b√°o/g√≥p √Ω</li>
                            <li>Th∆∞·ªùng ho·∫°t ƒë·ªông: 11h50 ‚Äì 13h00; 17h00 ‚Äì 20h45</li>
                            <li>Th√¥ng tin c√≥ th·ªÉ ch∆∞a ch√≠nh x√°c, vui l√≤ng ki·ªÉm tra l·∫°i</li>
                            <li>M·ª•c ƒë√≠ch: t·ªët cho m·ªçi ng∆∞·ªùi ‚Üí n·∫øu sai s√≥t xin b√°o l·∫°i, kh√¥ng ch·ª≠i t·ª•c</li>
                            <li>B·∫°n ƒë·ªçc hay kh√¥ng l√† quy·ªÅn c·ªßa b·∫°n, kh√¥ng v·ª´a √Ω vui l√≤ng t√¨m ngu·ªìn kh√°c</li>
                            <li>S√°ch kh√¥ng ghi c√°ch di·ªÅu hay k·∫øt n·ªëi chi th·ª©c th√¨ n·∫∑c ƒë·ªãnh n√≥ l√† k·∫øt n·ªëi chi th·ª©c</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="dev-info">
                <i class="fas fa-code" aria-hidden="true"></i> ƒê∆∞·ª£c l√†m ra v√† ph√°t tri·ªÉn b·ªüi ChatGBT(WEB), Z AI(WEB), Gemini(WEB), V≈© Duy Anh(WEB&D·ªØ li·ªáu), Nguy·ªÖn VƒÉn Ho√†ng B√°ch(D·ªØ li·ªáu), Ho√†ng C√¥ng D∆∞∆°ng(D·ªØ li·ªáu)
            </div>
            <div class="donate-cta">
                <i class="fas fa-heart" aria-hidden="true"></i> Donate ch√∫ng t√¥i nh√©!^_^
            </div>
        </div>
    </div>
    
    <div class="event-popup" id="eventPopup" role="dialog" aria-modal="true" aria-labelledby="eventPopupTitle">
        <div class="event-popup-card" id="eventPopupCard">
            <button class="close" id="eventPopupClose" aria-label="ƒê√≥ng popup">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
            <h3 id="eventPopupTitle"></h3>
            <div id="eventPopupContent"></div>
        </div>
    </div>
    
    <div class="popup" id="tkbFullPopup" role="dialog" aria-modal="true" aria-labelledby="tkbFullTitle">
        <div class="popup-card tkb-full-card" id="tkbFullCard">
            <button class="close" id="tkbFullClose" aria-label="ƒê√≥ng popup TKB">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
            <h3 id="tkbFullTitle"><i class="fas fa-calendar-week" aria-hidden="true"></i> Th·ªùi kh√≥a bi·ªÉu c·∫£ tu·∫ßn</h3>
            <div id="tkbFullContent" class="tkb-full-content">
                </div>
        </div>
    </div>
    
    <main class="main-content">
        <div id="btvn-panel" class="tab-panel active" role="tabpanel">
            <div id="noticesContainer" class="note" aria-live="polite" style="display:none;"></div>
            <div class="content-wrapper" id="btvnContainer" aria-live="polite">
                ƒêang t·∫£i d·ªØ li·ªáu...
            </div>
        </div>
        
        <div id="tkb-panel" class="tab-panel" role="tabpanel">
            <div class="content-wrapper">
                <div id="tkbContainer" aria-live="polite">ƒêang t·∫£i d·ªØ li·ªáu...</div>
                <button id="showFullBtn" class="button-primary" aria-expanded="false" aria-controls="fullTKB">
                    <i class="fas fa-calendar-week" aria-hidden="true"></i>
                    <span>Xem to√†n b·ªô TKB</span>
                </button>
            </div>
        </div>
        
        <div id="changelog-panel" class="tab-panel" role="tabpanel">
            <div class="content-wrapper" id="changelogContainer" aria-live="polite">
                ƒêang t·∫£i d·ªØ li·ªáu...
            </div>
        </div>
        <div class="popup" id="ios-guide-popup" role="dialog" aria-modal="true" aria-labelledby="ios-guide-title">
    <div class="popup-card">
        <button class="close" id="ios-guide-close" aria-label="ƒê√≥ng popup">
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        <h3 id="ios-guide-title"><i class="fab fa-apple"></i> C√†i ƒë·∫∑t iOS (C·∫•u h√¨nh)</h3>
        <p>Do ch√≠nh s√°ch c·ªßa Apple, b·∫°n c·∫ßn c√†i ƒë·∫∑t m·ªôt "H·ªì s∆° c·∫•u h√¨nh" ƒë·ªÉ th√™m icon v√†o m√†n h√¨nh ch√≠nh.</p>

        <a id="ios-download-link" 
           href="https://duyanh662.github.io/TBBTVN8A4TTHCSGB/TB8A4.mobileconfig" 
           class="button-primary" 
           style="width: 100%; text-decoration: none; margin-bottom: 20px;">
            <i class="fas fa-download"></i> 1. T·∫£i h·ªì s∆° c·∫•u h√¨nh
        </a>

        <strong>2. L√†m theo c√°c b∆∞·ªõc sau:</strong>
        <ol style="margin-left: 20px; margin-top: 10px; line-height: 1.6;">
            <li>Sau khi t·∫£i, m·ªü ·ª©ng d·ª•ng <strong>C√†i ƒë·∫∑t</strong> (Settings).</li>
            <li>B·∫°n s·∫Ω th·∫•y m·ª•c <strong>"ƒê√£ t·∫£i v·ªÅ h·ªì s∆°"</strong> ·ªü ngay tr√™n c√πng, h√£y b·∫•m v√†o ƒë√≥.</li>
            <li>B·∫•m <strong>"C√†i ƒë·∫∑t"</strong> (Install) ·ªü g√≥c tr√™n b√™n ph·∫£i.</li>
            <li>Nh·∫≠p m·∫≠t kh·∫©u c·ªßa b·∫°n (n·∫øu ƒë∆∞·ª£c h·ªèi).</li>
            <li>B·∫•m <strong>"C√†i ƒë·∫∑t"</strong> m·ªôt l·∫ßn n·ªØa ƒë·ªÉ x√°c nh·∫≠n.</li>
            <li>Ra l·∫°i m√†n h√¨nh ch√≠nh v√† xem k·∫øt qu·∫£!</li>
        </ol>
    </div>
</div>
    </main>

    <script>
    (function(){
      const guide = document.getElementById('a2hs-guide');
      const closeBtn = document.getElementById('a2hs-close');
      const okBtn = document.getElementById('a2hs-ok');

      function hideGuide(){
        if(!guide) return;
        guide.classList.add('hidden');
        guide.setAttribute('aria-hidden','true');
      }
      function showGuide(){
        if(!guide) return;
        guide.classList.remove('hidden');
        guide.setAttribute('aria-hidden','false');
      }

      if(closeBtn) closeBtn.addEventListener('click', hideGuide);
      if(okBtn) okBtn.addEventListener('click', hideGuide);

      // expose helper so app-banner.js (or other code) can call showA2HSGuide() when needed
      window.showA2HSGuide = showGuide;
      window.hideA2HSGuide = hideGuide;
    })();
    </script>

    <script src="script.js" defer></script>
</body>
</html>
