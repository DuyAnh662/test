<!DOCTYPE html>
<html lang="vi">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-92KE83JEYM"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  
          function gtag() {
              dataLayer.push(arguments);
          }
          gtag('js', new Date());
  
          gtag('config', 'G-92KE83JEYM');
  </script>
  <meta charset="utf-8" />
  <title>B·∫£ng Th√¥ng B√°o BTVN - 27/9/2025</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
  :root {
              /* M√†u ch·ªß ƒë·ªÅ m·∫∑c ƒë·ªãnh (xanh d∆∞∆°ng) */
              --theme-primary: #0066cc;
              --theme-secondary: #4d94ff;
              --theme-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
              --theme-accent: #0066cc;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* C√°c bi·∫øn c∆° b·∫£n */
              --bg: #f0f8ff;
              --card: var(--theme-card);
              --text: #333;
              --accent: var(--theme-accent);
              --note-bg: rgba(255, 243, 205, 0.7);
              --note-border: #ff9900;
              --glass-bg: var(--theme-glass);
              --glass-border: var(--theme-border);
              
              /* Giao di·ªán th∆∞·ªùng */
              --normal-card: #ffffff;
              --normal-border: #e0e0e0;
          }
          
          /* Ch·ªß ƒë·ªÅ m√†u h·ªìng */
  body.theme-pink {
              --theme-primary: #e91e63;
              --theme-secondary: #f06292;
              --theme-bg: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
              --theme-accent: #e91e63;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* M√†u nh·∫π h∆°n cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #fff5f8;
              --normal-border: #f8bbd0;
  }
          
          /* Ch·ªß ƒë·ªÅ m√†u xanh d∆∞∆°ng */
  body.theme-blue {
              --theme-primary: #0066cc;
              --theme-secondary: #4d94ff;
              --theme-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
              --theme-accent: #0066cc;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* M√†u nh·∫π h∆°n cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #f5f9ff;
              --normal-border: #c3d9f2;
  }
          
          /* Ch·ªß ƒë·ªÅ m√†u xanh l√° */
  body.theme-green {
              --theme-primary: #4caf50;
              --theme-secondary: #81c784;
              --theme-bg: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
              --theme-accent: #4caf50;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* M√†u nh·∫π h∆°n cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #f5faf5;
              --normal-border: #c8e6c9;
  }
          
          /* Ch·ªß ƒë·ªÅ m√†u t∆∞∆°i (cam) */
  body.theme-fresh {
              --theme-primary: #ff9800;
              --theme-secondary: #ffb74d;
              --theme-bg: linear-gradient(135deg, #fff8e1 0%, #ffe0b2 100%);
              --theme-accent: #ff9800;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* M√†u nh·∫π h∆°n cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #fffbf0;
              --normal-border: #ffe0b2;
  }
          
          /* Ch·ªß ƒë·ªÅ m√†u nhi·ªÅu ng∆∞·ªùi th√≠ch nh·∫•t (t√≠m) */
  body.theme-popular {
              --theme-primary: #9c27b0;
              --theme-secondary: #ba68c8;
              --theme-bg: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
              --theme-accent: #9c27b0;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* M√†u nh·∫π h∆°n cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #faf5fb;
              --normal-border: #e1bee7;
  }
          
          /* Ch·ªß ƒë·ªÅ m√†u tr·∫Øng */
  body.theme-white {
              --theme-primary: #424242;
              --theme-secondary: #616161;
              --theme-bg: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
              --theme-accent: #424242;
              --theme-card: rgba(255, 255, 255, 0.8);
              --theme-glass: rgba(255, 255, 255, 0.3);
              --theme-border: rgba(0, 0, 0, 0.1);
              
              /* M√†u cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #ffffff;
              --normal-border: #e0e0e0;
  }
          
          /* Ch·ªß ƒë·ªÅ m√†u ƒëen */
  body.theme-black {
              --theme-primary: #ffffff;
              --theme-secondary: #e0e0e0;
              --theme-bg: linear-gradient(135deg, #212121 0%, #424242 100%);
              --theme-accent: #ffffff;
              --theme-card: rgba(66, 66, 66, 0.8);
              --theme-glass: rgba(66, 66, 66, 0.3);
              --theme-border: rgba(255, 255, 255, 0.1);
              
              /* M√†u cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #424242;
              --normal-border: #616161;
              
              /* ƒêi·ªÅu ch·ªânh m√†u ch·ªØ cho ch·ªß ƒë·ªÅ ƒëen */
              --text: #f5f5f5;
          }
          
          /* Ch·ªß ƒë·ªÅ m√†u xanh ng·ªçc - t√≠m */
  body.theme-aquaviolet {
              --theme-primary: #00b4d8;
              --theme-secondary: #7209b7;
              --theme-bg: linear-gradient(135deg, #caf0f8 0%, #e0aaff 100%);
              --theme-accent: #00b4d8;
              --theme-card: rgba(255, 255, 255, 0.7);
              --theme-glass: rgba(255, 255, 255, 0.25);
              --theme-border: rgba(255, 255, 255, 0.18);
              
              /* M√†u nh·∫π h∆°n cho ch·∫ø ƒë·ªô th∆∞·ªùng */
              --normal-card: #f0f9ff;
              --normal-border: #c5e4ff;
          }
          
          body {
              margin: 16px;
              font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
              background: var(--theme-bg);
              color: var(--text);
              transition: background .3s, color .3s;
              min-height: 100vh;
              position: relative;
              overflow-x: hidden;
              will-change: background;
          }
          
          /* Th√™m hi·ªáu ·ª©ng n·ªÅn ƒë·ªông */
          body::before {
              content: "";
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
              z-index: -1;
              pointer-events: none;
          }
          
          /* dark */
          
          body.dark {
              --bg: #0f0f10;
              --card: rgba(22, 22, 23, 0.7);
              --text: #f0f0f0; /* TƒÉng ƒë·ªô s√°ng c·ªßa ch·ªØ ƒë·ªÉ d·ªÖ ƒë·ªçc h∆°n */
              --accent: #66b2ff;
              --note-bg: rgba(58, 46, 0, 0.7);
              --note-border: #ffcc00;
              --glass-bg: rgba(30, 30, 32, 0.25);
              --glass-border: rgba(255, 255, 255, 0.08);
          }
          
          body.dark::before {
              background: linear-gradient(45deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 70%);
          }
          
          /* Canvas b·∫ßu tr·ªùi sao - ch·ªâ hi·ªÉn th·ªã trong dark mode */
          #sky {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              z-index: -1;
              display: none;
          }
          
          body.dark #sky {
              display: block;
          }
          
          /* Giao di·ªán th∆∞·ªùng (kh√¥ng ph·∫£i Liquid Glass) */
          body.normal-mode:not(.dark) {
              --card: var(--normal-card);
              --glass-bg: var(--normal-card);
              background: var(--theme-bg);
          }
          
          body.normal-mode:not(.dark) .card {
              backdrop-filter: none;
              -webkit-backdrop-filter: none;
              border: 1px solid var(--normal-border);
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
          }
          
          body.normal-mode:not(.dark) .menu-btn,
          body.normal-mode:not(.dark) .menu-panel,
          body.normal-mode:not(.dark) .popup-card,
          body.normal-mode:not(.dark) #showFullBtn,
          body.normal-mode:not(.dark) table,
          body.normal-mode:not(.dark) .changelog {
              backdrop-filter: none;
              -webkit-backdrop-filter: none;
          }
          
          body.normal-mode:not(.dark) .menu-btn {
              background: var(--normal-card);
              border: 1px solid var(--normal-border);
          }
          
          body.normal-mode:not(.dark) .menu-panel {
              background: var(--normal-card);
              border: 1px solid var(--normal-border);
          }
          
          body.normal-mode:not(.dark) .popup-card {
              background: var(--normal-card);
              border: 1px solid var(--normal-border);
          }
          
          body.normal-mode:not(.dark) #showFullBtn {
              background: var(--normal-card);
              border: 1px solid var(--normal-border);
          }
          
          body.normal-mode:not(.dark) table {
              background: var(--normal-card);
              border: 1px solid var(--normal-border);
          }
          
          body.normal-mode:not(.dark) .changelog {
              background: var(--normal-card);
              border: 1px solid var(--normal-border);
          }
          
          /* ·∫®n t√πy ch·ªçn m√†u khi ·ªü ch·∫ø ƒë·ªô dark */
          body.dark .color-theme-options {
              display: none;
          }
          
          /* Menu */
          
          .menu {
              position: fixed;
              top: 18px;
              right: 18px;
              z-index: 1200;
          }
          
          .menu-btn {
              background: var(--glass-bg);
              backdrop-filter: blur(10px);
              -webkit-backdrop-filter: blur(10px);
              color: var(--text);
              border: 1px solid var(--glass-border);
              padding: 10px 16px;
              border-radius: 16px;
              cursor: pointer;
              font-weight: 600;
              box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
              transition: all 0.3s ease;
          }
          
          .menu-btn:hover {
              transform: translateY(-2px);
              box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
              background: var(--accent);
              color: white;
          }
          
          .menu-panel {
              display: none;
              position: absolute;
              top: 44px;
              right: 0;
              width: 240px;
              background: var(--glass-bg);
              backdrop-filter: blur(20px);
              -webkit-backdrop-filter: blur(20px);
              border-radius: 16px;
              box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
              overflow: hidden;
              border: 1px solid var(--glass-border);
              transform-origin: top right;
              animation: menuFadeIn 0.3s ease;
          }
          
          @keyframes menuFadeIn {
              from {
                  opacity: 0;
                  transform: scale(0.9) translateY(-10px);
              }
              to {
                  opacity: 1;
                  transform: scale(1) translateY(0);
              }
          }
          
          .menu-panel button {
              display: block;
              width: 100%;
              padding: 12px 16px;
              border: none;
              background: transparent;
              text-align: left;
              cursor: pointer;
              color: var(--text);
              transition: all 0.2s ease;
          }
          
          .menu-panel button:hover {
              background: rgba(255, 255, 255, 0.1);
              transform: translateX(4px);
          }
          
          body.dark .menu-panel button:hover {
              background: rgba(255, 255, 255, 0.05);
          }
          
          /* T√πy ch·ªçn m√†u ch·ªß ƒë·ªÅ */
          .color-theme-options {
              padding: 10px 16px;
              border-top: 1px solid rgba(255, 255, 255, 0.1);
              margin-top: 8px;
          }
          
          .color-theme-title {
              font-size: 14px;
              font-weight: 600;
              margin-bottom: 8px;
              color: var(--text);
              opacity: 0.8;
          }
          
          .color-themes {
              display: flex;
              gap: 8px;
              flex-wrap: wrap;
          }
          
          .color-theme {
              width: 28px;
              height: 28px;
              border-radius: 50%;
              cursor: pointer;
              border: 2px solid transparent;
              transition: all 0.2s ease;
          }
          
          .color-theme:hover {
              transform: scale(1.1);
          }
          
          .color-theme.active {
              border-color: var(--text);
              box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
          }
          
          .color-theme.pink {
              background: #e91e63;
          }
          
          .color-theme.blue {
              background: #0066cc;
          }
          
          .color-theme.green {
              background: #4caf50;
          }
          
          .color-theme.fresh {
              background: #ff9800;
          }
          
          .color-theme.popular {
              background: #9c27b0;
          }
          
          .color-theme.white {
              background: #ffffff;
              border: 1px solid #e0e0e0;
          }
          
          .color-theme.aquaviolet {
              background: linear-gradient(135deg, #00b4d8, #7209b7);
          }
          
          /* popup */
          
          .popup {
              display: none;
              position: fixed;
              inset: 0;
              background: rgba(0, 0, 0, 0.4);
              backdrop-filter: blur(5px);
              -webkit-backdrop-filter: blur(5px);
              z-index: 1100;
              align-items: center;
              justify-content: center;
              padding: 20px;
          }
          
          .popup.open {
              display: flex;
              animation: fadeIn 0.3s ease;
          }
          
          @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
          }
          
          .popup-card {
              width: 420px;
              max-width: 100%;
              background: var(--glass-bg);
              backdrop-filter: blur(20px);
              -webkit-backdrop-filter: blur(20px);
              color: var(--text);
              padding: 24px;
              border-radius: 20px;
              box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
              position: relative;
              border: 1px solid var(--glass-border);
              animation: popupIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
              transform-origin: center;
          }
          
          @keyframes popupIn {
              from {
                  transform: scale(0.8) translateY(20px);
                  opacity: 0;
              }
              to {
                  transform: scale(1) translateY(0);
                  opacity: 1;
              }
          }
          
          .popup-card .close {
              position: absolute;
              right: 16px;
              top: 16px;
              cursor: pointer;
              font-size: 20px;
              opacity: .85;
              width: 32px;
              height: 32px;
              display: flex;
              align-items: center;
              justify-content: center;
              border-radius: 50%;
              transition: all 0.2s ease;
              z-index: 10;
          }
          
          .popup-card .close:hover {
              opacity: 1;
              background: rgba(255, 255, 255, 0.1);
              transform: rotate(90deg);
          }
          /* layout: two column on wide screens */
          
          .wrap {
              display: flex;
              flex-direction: column;
              gap: 24px;
              max-width: 1200px;
              margin: 80px auto 40px;
              padding: 0 16px;
          }
          
          @media(min-width:900px) {
              .wrap {
                  flex-direction: row;
                  align-items: flex-start;
              }
          }
          
          .card {
              background: var(--glass-bg);
              backdrop-filter: blur(20px);
              -webkit-backdrop-filter: blur(20px);
              color: var(--text);
              padding: 24px;
              border-radius: 20px;
              box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
              border: 1px solid var(--glass-border);
              transition: background 0.3s ease;
              will-change: background;
          }
          
          /* X√≥a ho√†n to√†n hi·ªáu ·ª©ng khi di chu·ªôt v√†o card */
          .card:hover {
              transform: none;
              box-shadow: none;
          }
          
          /* X√≥a hi·ªáu ·ª©ng liquid cho card */
          .card.liquid-effect:hover::before {
              transform: scale(0);
          }
          
          .card.half {
              width: 100%;
          }
          
          @media(min-width:900px) {
              .card.half {
                  width: 48%;
              }
          }
          
          h1 {
              color: var(--accent);
              margin: 6px 0 20px;
              text-align: center;
              font-weight: 700;
              font-size: 28px;
              text-shadow: 0 2px 10px rgba(0, 102, 204, 0.2);
          }
          
          h2 {
              margin: 16px 0;
              color: var(--text);
              border-left: 6px solid var(--accent);
              padding-left: 12px;
              font-weight: 600;
          }
          
          .note {
              background: var(--note-bg);
              backdrop-filter: blur(10px);
              -webkit-backdrop-filter: blur(10px);
              border-left: 6px solid var(--note-border);
              padding: 14px 16px;
              border-radius: 12px;
              color: inherit;
              margin-top: 20px;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
          }
          
          table {
              width: 100%;
              border-collapse: separate;
              border-spacing: 0;
              margin-top: 16px;
              border-radius: 12px;
              overflow: hidden;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
          }
          
          th,
          td {
              border: none;
              padding: 12px 16px;
              text-align: left;
          }
          
          th {
              background: rgba(0, 0, 0, 0.04);
              color: var(--accent);
              font-weight: 700;
          }
          
          tr:nth-child(even) td {
              background: rgba(0, 0, 0, 0.02);
          }
          
          body.dark th {
              background: rgba(0, 0, 0, 0.2);
          }
          
          body.dark tr:nth-child(even) td {
              background: rgba(255, 255, 255, 0.02);
          }
          
          body.dark td {
              color: var(--text);
          }
          
          #showFullBtn {
              background: var(--glass-bg);
              backdrop-filter: blur(10px);
              -webkit-backdrop-filter: blur(10px);
              color: var(--text);
              border: 1px solid var(--glass-border);
              padding: 10px 16px;
              border-radius: 12px;
              cursor: pointer;
              margin-top: 16px;
              font-weight: 600;
              transition: all 0.3s ease;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
              will-change: transform;
          }
          
          #showFullBtn:hover {
              transform: translateY(-2px);
              box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
              background: var(--accent);
              color: white;
          }
          
          body.normal-mode:not(.dark) #showFullBtn:hover {
              background: var(--accent);
              color: white;
          }
          
          /* report fixed */
          
          #reportFixed {
              position: fixed;
              right: 18px;
              bottom: 18px;
              background: linear-gradient(135deg, #ff4d4d, #ff1a1a);
              color: #fff;
              padding: 12px 16px;
              border-radius: 16px;
              border: none;
              cursor: pointer;
              box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
              z-index: 1000;
              font-weight: 600;
              transition: all 0.3s ease;
          }
          
          #reportFixed:hover {
              transform: translateY(-3px);
              box-shadow: 0 12px 24px rgba(255, 77, 77, 0.4);
          }
          /* small styling for "editable" */
          
          .editable {
              padding: 6px 10px;
              border-radius: 8px;
              background: rgba(0, 0, 0, 0.03);
              display: inline-block;
              cursor: text;
              transition: all 0.2s ease;
          }
          
          .editable:hover {
              background: rgba(0, 0, 0, 0.06);
          }
          
          .save-truc {
              display: inline-block;
              margin-left: 8px;
              padding: 6px 12px;
              border-radius: 8px;
              background: var(--accent);
              color: white;
              border: none;
              cursor: pointer;
              font-weight: 600;
              transition: all 0.2s ease;
          }
          
          .save-truc:hover {
              background: #0052a3;
              transform: translateY(-1px);
          }
          
          .inline-note {
              margin-top: 12px;
              display: block;
              color: rgba(0, 0, 0, .6);
              font-size: 14px;
          }
          
          body.dark .inline-note {
              color: rgba(255, 255, 255, .7); /* TƒÉng ƒë·ªô s√°ng ƒë·ªÉ d·ªÖ ƒë·ªçc h∆°n */
          }
          
          .changelog {
              background: var(--glass-bg);
              backdrop-filter: blur(10px);
              -webkit-backdrop-filter: blur(10px);
              border-radius: 12px;
              padding: 16px 20px;
              margin: 20px 0;
              font-family: inherit;
              transition: background .25s, color .25s;
              border: 1px solid var(--glass-border);
          }
          
          /* Light mode (m·∫∑c ƒë·ªãnh) */
          
          body:not(.dark) .changelog {
              color: var(--text);
              border-left: 5px solid var(--accent);
          }
          
          body:not(.dark) .changelog h3,
          body:not(.dark) .changelog strong {
              color: var(--text);
          }
          
          body:not(.dark) .changelog li {
              color: var(--accent);
          }
          /* Dark mode */
          
          body.dark .changelog {
              color: var(--text);
              border-left: 5px solid var(--accent);
          }
          
          body.dark .changelog h3,
          body.dark .changelog strong {
              color: var(--text);
          }
          
          body.dark .changelog li {
              color: #93c5fd;
          }
          
          .menu-panel a.donate-btn {
              display: block;
              width: 100%;
              padding: 12px 16px;
              text-align: left;
              text-decoration: none;
              color: var(--text);
              font-weight: 600;
              transition: all 0.2s ease;
          }
          
          .menu-panel a.donate-btn:hover {
              background: rgba(255, 255, 255, 0.1);
              transform: translateX(4px);
          }
          
          body.dark .menu-panel a.donate-btn:hover {
              background: rgba(255, 255, 255, 0.05);
          }
          
          .popup-card h3 {
              margin: 0 0 16px;
              font-size: 22px;
              font-weight: 700;
              color: var(--accent);
              display: flex;
              align-items: center;
              gap: 8px;
          }
          
          .popup-card h3::before {
              content: "‚ö†Ô∏è";
          }
          
          .popup-card ul {
              margin: 0;
              padding-left: 20px;
          }
          
          .popup-card li {
              margin: 8px 0;
              line-height: 1.6;
          }
          
          .popup-card li strong {
              color: var(--accent);
          }
          
          .popup-card .footer-check {
              margin-top: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
              font-size: 14px;
              opacity: .85;
          }
          
          .report-link {
              display: block;
              padding: 12px 16px;
              border-radius: 12px;
              font-weight: 600;
              color: #fff;
              background: linear-gradient(135deg, #ff4d4d, #ff1a1a);
              text-decoration: none;
              transition: all 0.3s ease;
              margin: 8px 16px;
              position: relative;
              z-index: 10;
          }
          
          .report-link:hover {
              background: linear-gradient(135deg, #ff6666, #ff3333);
              box-shadow: 0 6px 15px rgba(255, 50, 50, 0.6);
              transform: translateY(-2px);
          }
          
          body.dark .report-link {
              background: linear-gradient(135deg, #ff3333, #cc0000);
          }
          
          /* Th√™m hi·ªáu ·ª©ng liquid cho c√°c ph·∫ßn t·ª≠ */
          .liquid-effect {
              position: relative;
              overflow: hidden;
          }
          
          .liquid-effect::before {
              content: "";
              position: absolute;
              top: -50%;
              left: -50%;
              width: 200%;
              height: 200%;
              background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
              transform: scale(0);
              transition: transform 0.6s ease;
          }
          
          /* Kh√¥ng √°p d·ª•ng hi·ªáu ·ª©ng liquid cho card khi hover */
          .card.liquid-effect:hover::before {
              transform: scale(0);
          }
          
          /* Hi·ªáu ·ª©ng loading */
          .loading {
              display: inline-block;
              width: 20px;
              height: 20px;
              border: 3px solid rgba(0, 102, 204, 0.3);
              border-radius: 50%;
              border-top-color: var(--accent);
              animation: spin 1s ease-in-out infinite;
          }
          
          @keyframes spin {
              to { transform: rotate(360deg); }
          }
          
          /* X√≥a hi·ªáu ·ª©ng cho c√°c list items */
          ul li {
              margin: 8px 0;
              padding-left: 8px;
              position: relative;
          }
          
          ul li::before {
              content: "‚Ä¢";
              color: var(--accent);
              font-weight: bold;
              position: absolute;
              left: -8px;
          }
          /* X√≥a hi·ªáu ·ª©ng cho ti√™u ƒë·ªÅ */
          h1, h2, h3 {
              position: relative;
          }
          
          h1::after, h2::after, h3::after {
              content: "";
              position: absolute;
              bottom: -2px;
              left: 0;
              width: 0;
              height: 2px;
              background: var(--accent);
          }
          
          /* Th√™m hi·ªáu ·ª©ng glass cho c√°c b·∫£ng */
          table {
              background: var(--glass-bg);
              backdrop-filter: blur(10px);
              -webkit-backdrop-filter: blur(10px);
              border: 1px solid var(--glass-border);
          }
          
          /* Hi·ªáu ·ª©ng cho c√°c n√∫t trong b·∫£ng */
          .editable-truc {
              position: relative;
              cursor: pointer;
              padding: 4px 8px;
              border-radius: 6px;
              transition: all 0.2s ease;
          }
          
          .editable-truc:hover {
              background: rgba(0, 102, 204, 0.1);
          }
          
          /* X√≥a hi·ªáu ·ª©ng cho c√°c li√™n k·∫øt */
          a {
              color: var(--accent);
              text-decoration: none;
              position: relative;
          }
          
          a::after {
              content: "";
              position: absolute;
              bottom: -1px;
              left: 0;
              width: 0;
              height: 1px;
              background: var(--accent);
          }
          /* Hi·ªáu ·ª©ng cho c√°c input */
          input[type="checkbox"] {
              width: 18px;
              height: 18px;
              cursor: pointer;
              position: relative;
              top: 2px;
              margin-right: 6px;
          }
          
          /* Hi·ªáu ·ª©ng cho c√°c n√∫t */
          button {
              transition: all 0.3s ease;
          }
          
          /* Hi·ªáu ·ª©ng cho c√°c ph·∫ßn t·ª≠ c√≥ class "note" */
          .note {
              position: relative;
              overflow: hidden;
          }
          
          .note::before {
              content: "";
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
              pointer-events: none;
          }
          
          /* T·ªëi ∆∞u hi·ªáu su·∫•t */
          .card, .menu-btn, .menu-panel, .popup-card, #showFullBtn, table, .changelog {
              transform: translateZ(0);
              backface-visibility: hidden;
              perspective: 1000px;
          }
          
          /* TƒÉng ƒë·ªô t∆∞∆°ng ph·∫£n cho dark mode */
          body.dark .card {
              color: #f0f0f0; /* TƒÉng ƒë·ªô s√°ng c·ªßa ch·ªØ */
          }
          
          body.dark h2 {
              color: #f0f0f0; /* TƒÉng ƒë·ªô s√°ng c·ªßa ti√™u ƒë·ªÅ */
          }
          
          body.dark ul li {
              color: #e0e0e0; /* TƒÉng ƒë·ªô s√°ng c·ªßa danh s√°ch */
          }
          
          body.dark .inline-note {
              color: #b0b0b0; /* TƒÉng ƒë·ªô s√°ng c·ªßa ghi ch√∫ */
          }
          
          body.dark .changelog li {
              color: #a0c4ff; /* M√†u xanh nh·∫°t h∆°n cho d·ªÖ ƒë·ªçc */
          }
          
          body.dark .popup-card {
              color: #f0f0f0; /* TƒÉng ƒë·ªô s√°ng c·ªßa ch·ªØ trong popup */
          }
          
          body.dark .menu-panel button {
              color: #f0f0f0; /* TƒÉng ƒë·ªô s√°ng c·ªßa ch·ªØ trong menu */
          }
          
          body.dark .menu-panel a.donate-btn {
              color: #f0f0f0; /* TƒÉng ƒë·ªô s√°ng c·ªßa li√™n k·∫øt donate */
          }
  </style>
</head>

<body>
  <!-- Th√™m canvas b·∫ßu tr·ªùi sao -->
  <canvas id="sky"></canvas>

  <!-- MENU -->
  <div class="menu" aria-hidden="false">
    <button class="menu-btn liquid-effect" id="menuBtn">‚ò∞ Menu</button>
    <div class="menu-panel" id="menuPanel" role="menu" aria-hidden="true">
      <button id="menuDark">üåô Chuy·ªÉn Dark/Light</button>
      <button id="menuLiquid">‚ú® Chuy·ªÉn Liquid Glass/Th∆∞·ªùng</button>
      <button id="menuPopup">‚ùóB·∫≠t b·∫£ng L∆∞u √Ω</button>
      <a href="Donate.html" target="_blank" class="donate-btn">‚ù§Ô∏è Donate to us</a>
      <a href="Report.html" class="report-link">üö® Report</a>
      
      <!-- T√πy ch·ªçn m√†u ch·ªß ƒë·ªÅ -->
      <div class="color-theme-options">
        <div class="color-theme-title">Ch·ªçn m√†u ch·ªß ƒë·ªÅ:</div>
        <div class="color-themes">
          <div class="color-theme pink" data-theme="pink" title="H·ªìng"></div>
          <div class="color-theme blue" data-theme="blue" title="Xanh d∆∞∆°ng"></div>
          <div class="color-theme green" data-theme="green" title="Xanh l√°"></div>
          <div class="color-theme fresh" data-theme="fresh" title="M√†u t∆∞∆°i"></div>
          <div class="color-theme popular" data-theme="popular" title="M√†u nhi·ªÅu ng∆∞·ªùi th√≠ch nh·∫•t"></div>
          <div class="color-theme white" data-theme="white" title="Tr·∫Øng"></div>
          <div class="color-theme aquaviolet" data-theme="aquaviolet" title="Xanh ng·ªçc - T√≠m"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- POPUP -->
  <div class="popup" id="popup">
    <div class="popup-card liquid-effect" id="popupCard">
      <div class="close" id="popupClose" title="ƒê√≥ng">‚úï</div>
      <h3>‚ùóL∆∞u √Ω</h3>
      <p id="popupText">+ƒê∆∞·ª£c l√†m ra v√† ph√°t tri·ªÉn b·ªüi ChatGBT(Web), V≈© Duy Anh v√† Nguy·ªÖn VƒÉn Ho√†ng B√°ch</p>
      <p id="popupText">+Donate ch√∫ng toi nh√©!^_^</p>
      <p style="margin-top:12px; text-align:left;">
        <label>
          <input type="checkbox" id="dontShowToday" />Kh√¥ng hi·ªÉn th·ªã l·∫°i h√¥m nay</label>
      </p>
    </div>
  </div>
  <!-- MAIN -->
  <div class="wrap">
    <!-- BTVN -->
    <div class="card liquid-effect">
      <h1>üì¢ Th√¥ng b√°o BTVN cho 29/9/2025</h1>
      <h2>üìò ƒê·ªãa l√≠</h2>
      <ul>
        <li>T√¨m hi·ªÉu d·∫°ng ƒë·ªãa h√¨nh C√°c-xt∆° v√† h·ªçc thu·ªôc</li>
      </ul>
      <h2>‚ûó To√°n h·ªçc</h2>
      <strong>H√¨nh:</strong>
      <ul>
        <li>L√†m n·ªët b√†i 3.5(SGK-55)</li>
        <li>√în l·∫°i b√†i c≈©</ul>
      <strong>S·ªë:</strong>
      <ul>
        <li>1.18 ‚Üí 1.23 S√°ch to√°n t·∫≠p 1 [SGK-17; 18]</li>
      </ul>
      <h2>‚úç Ng·ªØ vƒÉn</h2>
      <ul>
        <li>L√†m b√†i c√¥ ƒë√£ cho ghi tr√™n l·ªõp</li>
        <li>ƒê·ªçc tr∆∞·ªõc Tri th·ª©c ng·ªØ vƒÉn b√†i 2(SGK-39‚Üí40)</li>
        <li>ƒê·ªçc tr∆∞·ªõc t√°c ph·∫©m "Thu ƒëi·∫øu" c·ªßa Nguy·ªÖn Khuy·∫øn (SGK-40‚Üí41)</ul>
      <h2>üß¨ Sinh h·ªçc</h2>
      <ul>
        <li>L√†m b√†i ho·∫°t ƒë·ªông 2(SGK-131) d·ª±a v√†o b·∫£ng 3.1‚Üí3.3</li>
      </ul>
      <h2>üè† GDƒêP</h2>
      <ul>
        <li>Ch∆∞a c√≥ b√†i</li>
      </ul>
      <h2>üìú L·ªãch s·ª≠</h2>
      <ul>
        <li>Hi·ªán kh√¥ng c√≥ b√†i[Ch∆∞a r√µ]</li>
      </ul>
      <h2>üî¨ V·∫≠t l√Ω</h2>
      <ul>
        <li>L√†m b√†i th·∫ßy ƒë√£ ƒë·ªçc tr√™n l·ªõp</li>
      </ul>
      <h2>ü§ù HƒêTN, HN</h2>
      <ul>
        <li>V·∫Ω tranh ho·∫∑c l√†m th∆° ch·ªß ƒë·ªÅ b·∫•t k√¨ ƒë·ªëi v·ªõi th∆° tranh ch·ªß ƒë·ªÅ truy·ªÅn th·ªëng tr∆∞·ªùng t·ªët ƒë·∫πp[Th·ª© s√°u n·ªôp]</li>
        <li>L∆∞u √Ω nh·ªè: l√†m ra gi·∫•y</ul>
      <h2>üé® Mƒ© thu·∫≠t</h2>
      <ul>
        <li>V·∫Ω xong b√†i c√¥ ƒë√£ cho</li>
      </ul>
      <h2>‚öó H√≥a h·ªçc</h2>
      <ul>
        <li>H·ªçc thu·ªôc kh√°i ni·ªám bi·∫øn ƒë·ªïi v·∫≠t l√Ω v√† kh√°i ni·ªán bi·∫øn ƒë·ªïi h√≥a h·ªçc</li>
      </ul>
      <h2>üá¨üáß Ti·∫øng Anh(Global success)</h2>
      <ul>
        <li>L√†m n·ªët b√†i 4(S√°ch trang 22)</li>
        <li>√în l·∫°i c√°ch c√¥ng th·ª©c(B√†i c≈©, cho nh·ªõ)</li>
      </ul>
      <h2>üë• C√¥ng d√¢n</h2>
      <ul>
        <li>L√†m v·∫≠n d·ª•ng b√†i 1; 2(SGK-9)</li>
        <li>L√†m b√†i 1 ƒë·∫øn 4 (SGK trang 8 v√† 9)[N·∫øu ch∆∞a l√†m xong]</li>
        <li>L∆∞u √Ω nh·ªè: C√≥ th·ªÉ s·∫Ω ch·∫•m</li>
      </ul>
      <h2>üîß C√¥ng ngh·ªá</h2>
      <ul>
        <li>Ch∆∞a c√≥ b√†i</li>
      </ul>
      <h2>üé∂ √Çm nh·∫°c(S√°ch c√°nh di·ªÅu)</h2>
      <ul>
        <li>H·ªçc b√†i h√°t "B·∫£n l√†ng t∆∞∆°i ƒë·∫πp"(SGK-13)</li>
      </ul>
      <h2>üíª Tin h·ªçc</h2>
      <ul>
        <li>H·ªçc h·∫øt Ph·∫ßn 1 ho·∫∑c 2 b√†i 2(Ch∆∞a r√µ)</li>
      </ul>
      <div class="note">
        <strong>L∆ØU √ù:</strong>
        <ul>
          <li>Mu·ªën b√°o l·ªói ho·∫∑c g√≥p √Ω vui l√≤ng nh·∫≠p b·∫•m n√∫t menu r·ªìi b·∫•m report nh·∫≠p th√¥ng tin b·∫°n mu·ªën b√°o(H√£y ƒë·ªÉ t√™n b·∫°n ·ªü cu·ªëi v√† ƒë√≥ng ngo·∫∑c ghi ƒë√≥ l√† g√≥p √Ω hay b√°o l·ªói ·ªü ƒë·∫ßu ti√™n)</li>
          <li>Th∆∞·ªùng ho·∫°t ƒë·ªông: 11h50 ‚Äì 13h00; 17h00 ‚Äì 20h45</li>
          <li>Th√¥ng tin c√≥ th·ªÉ ch∆∞a ch√≠nh x√°c, vui l√≤ng ki·ªÉm tra l·∫°i</li>
          <li>M·ª•c ƒë√≠ch: t·ªët cho m·ªçi ng∆∞·ªùi ‚Üí n·∫øu sai s√≥t xin b√°o l·∫°i, kh√¥ng ch·ª≠i t·ª•c</li>
          <li>B·∫°n ƒë·ªçc hay kh√¥ng l√† quy·ªÅn c·ªßa b·∫°n, kh√¥ng v·ª´a √Ω vui l√≤ng t√¨m ngu·ªìn kh√°c</li>
          <li>S√°ch kh√¥ng ghi c√°ch di·ªÅu hay k·∫øt n·ªëi chi th·ª©c th√¨ n·∫∑c ƒë·ªãnh n√≥ l√† k·∫øt n·ªëi chi th·ª©c</li>
        </ul>
      </div>
      <div class="changelog" style="margin-top:14px;">
        <strong>Changelog (V2.8)</strong>
        <ul>
          <li>C·∫≠p nh·∫≠t Sinh h·ªçc</li>
          <li>C·∫≠p nh·∫≠t H√≥a h·ªçc</li>
          <li>C·∫≠p nh·∫≠t Ng·ªØ vƒÉn</li>
          <li>C·∫≠p nh·∫≠t L·ªãch tr·ª±c nh·∫≠t</li>
          <li>S·ª≠a ƒë·ªïi m·ªôt v√†i th·ª© kh√°c</li>
        </ul>
      </div>
    </div>
    <!-- TKB card -->
    <div class="card half liquid-effect" id="tkbCard">
      <h2>üìÖ Th·ªùi kh√≥a bi·ªÉu v√† l·ªãch tr·ª±c nh·∫≠t ng√†y mai</h2>
      <div id="todayTKB">ƒêang t·∫£i...</div>
      <button id="showFullBtn">üìÖ Xem to√†n b·ªô TKB & L·ªãch tr·ª±c</button>
      <div id="fullTKB" style="display:none; margin-top:14px;">
      </div>
    </div>
  </div>
  <script>
          /* -------------------------
          Config / d·ªØ li·ªáu m·∫∑c ƒë·ªãnh
          ------------------------- */
          const API_URL = "https://script.google.com/macros/s/AKfycbw5sjUwJfwRtKBQQu5FgYrmgSjoQ22vvnmlv99H7YJHTVgVZRXm1vWB7fFJg8B2O2M7/exec";
  
          const TKB = {
              0: ["Ch·ªß nh·∫≠t: Ngh·ªâ / T·ª± h·ªçc"],
              1: ["HƒêTN,HN(CC)", "LS&ƒêL - l·ªãch s·ª≠", "Ti·∫øng anh", "LS&ƒêL - ƒê·ªãa l√≠", "To√°n h·ªçc - ƒë·∫°i s·ªë"],
              2: ["Ng·ªØ vƒÉn", "Ti·∫øng anh", "C√¥ng ngh·ªá", "HƒêTN,HN", "GDTC"],
              3: ["Ng·ªØ vƒÉn", "To√°n h·ªçc - h√¨nh h·ªçc", "KHTN - V·∫≠t l√Ω", "NT - Mƒ© thu·∫≠t", "KHTN - Sinh h·ªçc"],
              4: ["To√°n h·ªçc - ƒë·∫°i S·ªë", "Tin h·ªçc", "LS&ƒêL - l·ªãch s·ª≠", "√Çm nh·∫°c", "Ti·∫øng anh"],
              5: ["GDƒêP", "Ng·ªØ vƒÉn", "HƒêTN,HN", "To√°n h·ªçc - h√¨nh h·ªçc", "Gi√°o d·ª•c c√¥ng d√¢n"],
              6: ["KHTN - Sinh h·ªçc", "GDTC", "Ng·ªØ vƒÉn", "KHTN - H√≥a h·ªçc", "Ngh·ªâ"]
          };
  
          // L·ªãch tr·ª±c (c√≥ l∆∞u localStorage n·∫øu user ch·ªânh)
          let truc = JSON.parse(localStorage.getItem('lichTruc') || 'null') || {
              0: "Ch·ªß nh·∫≠t: Kh√¥ng tr·ª±c",
              1: "T·ªï 4",
              2: "T·ªï 1",
              3: "T·ªï 2",
              4: "T·ªï 3",
              5: "T·ªï 4",
              6: "T·ªï 1",
          };
  
          const dayNames = ["Ch·ªß Nh·∫≠t", "Th·ª© Hai", "Th·ª© Ba", "Th·ª© T∆∞", "Th·ª© NƒÉm", "Th·ª© S√°u", "Th·ª© B·∫£y"];
  
          /* -------------------------
          Canvas b·∫ßu tr·ªùi sao - ch·ªâ ho·∫°t ƒë·ªông trong dark mode
          ------------------------- */
          const canvas = document.getElementById("sky");
          const ctx = canvas.getContext("2d");

          function resizeCanvas(){
              canvas.width = window.innerWidth;
              canvas.height = window.innerHeight;
          }
          window.addEventListener("resize", resizeCanvas);
          resizeCanvas();

          // ---- T·∫°o sao ----
          const stars = [];
          for(let i=0; i<200; i++){
              stars.push({
                  x: Math.random() * canvas.width,
                  y: Math.random() * canvas.height,
                  r: Math.random() * 1.5,
                  opacity: Math.random()
              });
          }

          // ---- Sao bƒÉng ----
          const meteors = [];
          let meteorInterval = null;
          
          function createMeteor(){
              meteors.push({
                  x: Math.random() * canvas.width,
                  y: Math.random() * (canvas.height/2),
                  length: Math.random() * 80 + 40,
                  speed: Math.random() * 12 + 8,
                  opacity: 1
              });
          }

          // ---- V·∫Ω b·∫ßu tr·ªùi ----
          function drawSky(){
              const isDarkMode = document.body.classList.contains("dark");
              
              // X√≥a canvas tr∆∞·ªõc khi v·∫Ω
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              
              // Ch·ªâ v·∫Ω khi dark mode ƒë∆∞·ª£c b·∫≠t
              if (isDarkMode) {
                  // N·ªÅn tr·ªùi
                  ctx.fillStyle = "#0f172a";
                  ctx.fillRect(0, 0, canvas.width, canvas.height);

                  // V·∫Ω sao
                  for(let s of stars){
                      ctx.beginPath();
                      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
                      ctx.fillStyle = `rgba(255,255,255,${s.opacity})`;
                      ctx.fill();
                      s.opacity += (Math.random()-0.5)*0.05;
                      if(s.opacity<0) s.opacity=0;
                      if(s.opacity>1) s.opacity=1;
                  }

                  // V·∫Ω sao bƒÉng
                  for(let i=meteors.length-1; i>=0; i--){
                      const m = meteors[i];
                      ctx.strokeStyle = `rgba(255,255,255,${m.opacity})`;
                      ctx.lineWidth = 2;
                      ctx.beginPath();
                      ctx.moveTo(m.x, m.y);
                      ctx.lineTo(m.x - m.length, m.y - m.length);
                      ctx.stroke();

                      m.x += m.speed;
                      m.y += m.speed;
                      m.opacity -= 0.05;

                      if(m.opacity <= 0){
                          meteors.splice(i, 1);
                      }
                  }
                  
                  // B·∫Øt ƒë·∫ßu t·∫°o sao bƒÉng n·∫øu ch∆∞a c√≥ interval
                  if(meteorInterval === null) {
                      meteorInterval = setInterval(createMeteor, 1200);
                  }
              } else {
                  // D·ª´ng t·∫°o sao bƒÉng khi kh√¥ng ·ªü dark mode
                  if(meteorInterval !== null) {
                      clearInterval(meteorInterval);
                      meteorInterval = null;
                      meteors.length = 0; // X√≥a t·∫•t c·∫£ sao bƒÉng
                  }
              }

              requestAnimationFrame(drawSky);
          }
          
          // B·∫Øt ƒë·∫ßu v·∫Ω b·∫ßu tr·ªùi
          drawSky();
  
          /* -------------------------
          Menu
          ------------------------- */
          const menuBtn = document.getElementById('menuBtn');
          const menuPanel = document.getElementById('menuPanel');
  
          menuBtn.addEventListener('click', (e) => {
              e.stopPropagation();
              menuPanel.style.display = menuPanel.style.display === 'block' ? 'none' : 'block';
          });
          window.addEventListener('click', (ev) => {
              if (!menuPanel.contains(ev.target) && ev.target !== menuBtn) menuPanel.style.display = 'none';
          });
  
          // Dark toggle in menu:
          const menuDark = document.getElementById('menuDark');
          document.getElementById("menuPopup").addEventListener("click", () => {
              openPopup(true); // m·ªü popup c∆∞·ª°ng b·ª©c khi b·∫•m trong menu
          });
          
          // Liquid/Normal toggle
          const menuLiquid = document.getElementById('menuLiquid');
          
          function applyThemeFromStorage() {
              // √Åp d·ª•ng dark mode
              if (localStorage.getItem('theme') === 'dark') {
                  document.body.classList.add('dark');
                  menuDark.textContent = '‚òÄÔ∏è Light Mode';
                  // T·ª± ƒë·ªông chuy·ªÉn sang ch·ªß ƒë·ªÅ ƒëen khi b·∫≠t dark mode
                  applyColorTheme('black');
              } else {
                  document.body.classList.remove('dark');
                  menuDark.textContent = 'üåô Dark Mode';
                  // Quay l·∫°i ch·ªß ƒë·ªÅ ƒë√£ l∆∞u tr∆∞·ªõc ƒë√≥ khi t·∫Øt dark mode
                  const savedTheme = localStorage.getItem('colorTheme') || 'blue';
                  applyColorTheme(savedTheme);
              }
              
              // √Åp d·ª•ng liquid/normal mode
              if (localStorage.getItem('liquidMode') === 'normal') {
                  document.body.classList.add('normal-mode');
                  menuLiquid.textContent = '‚ú® Chuy·ªÉn Liquid Glass/Th∆∞·ªùng';
              } else {
                  document.body.classList.remove('normal-mode');
                  menuLiquid.textContent = '‚ú® Chuy·ªÉn Giao di·ªán th∆∞·ªùng/Liquid';
              }
          }
          
          menuDark.addEventListener('click', () => {
              document.body.classList.toggle('dark');
              localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
              applyThemeFromStorage();
          });
          
          menuLiquid.addEventListener('click', () => {
              document.body.classList.toggle('normal-mode');
              localStorage.setItem('liquidMode', document.body.classList.contains('normal-mode') ? 'normal' : 'liquid');
              applyThemeFromStorage();
          });
          
          // X·ª≠ l√Ω m√†u ch·ªß ƒë·ªÅ
          function applyColorTheme(theme) {
              // X√≥a t·∫•t c·∫£ c√°c class m√†u ch·ªß ƒë·ªÅ
              document.body.classList.remove('theme-pink', 'theme-blue', 'theme-green', 'theme-fresh', 'theme-popular', 'theme-white', 'theme-black', 'theme-aquaviolet');
              
              // Th√™m class m√†u ch·ªß ƒë·ªÅ ƒë∆∞·ª£c ch·ªçn
              if (theme) {
                  document.body.classList.add(`theme-${theme}`);
              }
              
              // C·∫≠p nh·∫≠t tr·∫°ng th√°i active cho c√°c n√∫t m√†u
              document.querySelectorAll('.color-theme').forEach(btn => {
                  btn.classList.remove('active');
                  if (btn.dataset.theme === theme) {
                      btn.classList.add('active');
                  }
              });
              
              // L∆∞u m√†u ch·ªß ƒë·ªÅ v√†o localStorage (ch·ªâ khi kh√¥ng ·ªü dark mode)
              if (!document.body.classList.contains('dark')) {
                  localStorage.setItem('colorTheme', theme);
              }
          }
          
          // Th√™m s·ª± ki·ªán click cho c√°c n√∫t m√†u
          document.querySelectorAll('.color-theme').forEach(btn => {
              btn.addEventListener('click', () => {
                  const theme = btn.dataset.theme;
                  applyColorTheme(theme);
              });
          });
  
          /* -------------------------
          Popup logic (1 l·∫ßn/ng√†y + "Kh√¥ng hi·ªán h√¥m nay")
          ------------------------- */
          const popup = document.getElementById('popup');
          const popupClose = document.getElementById('popupClose');
          const dontShowTodayChk = document.getElementById('dontShowToday');
  
          function openPopup(force = false) {
              const today = new Date().toLocaleDateString('vi-VN');
              const disabled = localStorage.getItem('popupDisabled') === 'true'; // n·∫øu user t·∫Øt ho√†n to√†n (kh√¥ng d√πng ·ªü ƒë√¢y)
              
              if (force) {
                  popup.classList.add('open');
                  return;
              }
              
              if (disabled) return;
              
              const lastShown = localStorage.getItem('popupShownDate');
              if (lastShown !== today) {
                  popup.classList.add('open');
                  localStorage.setItem('popupShownDate', today);
              }
          }
  
          // ƒê√≥ng popup khi click v√†o n√∫t ƒë√≥ng
          popupClose.addEventListener('click', () => {
              if (dontShowTodayChk.checked) {
                  localStorage.setItem('popupShownDate', new Date().toLocaleDateString('vi-VN'));
              }
              popup.classList.remove('open');
          });
  
          // ƒê√≥ng popup khi click b√™n ngo√†i popup
          popup.addEventListener('click', (e) => {
              if (e.target === popup) {
                  if (dontShowTodayChk.checked) {
                      localStorage.setItem('popupShownDate', new Date().toLocaleDateString('vi-VN'));
                  }
                  popup.classList.remove('open');
              }
          });
  
          // ƒê√≥ng popup khi nh·∫•n ph√≠m Escape
          document.addEventListener('keydown', (e) => {
              if (e.key === 'Escape' && popup.classList.contains('open')) {
                  if (dontShowTodayChk.checked) {
                      localStorage.setItem('popupShownDate', new Date().toLocaleDateString('vi-VN'));
                  }
                  popup.classList.remove('open');
              }
          });
  
          // show on load
          window.addEventListener('load', () => {
              applyThemeFromStorage();
              openPopup(false);
          });
  
          /* -------------------------
             TKB rendering + full view + editing tr·ª±c
             ------------------------- */
          function computeShowDay() {
              // L·∫•y gi·ªù VN
              const vnNow = new Date(new Date().toLocaleString('en-US', {
                  timeZone: 'Asia/Ho_Chi_Minh'
              }));
          }
  
          // NOTE: small helper: get VN date/time (works cross-browser)
          function getVNDateObj() {
              const s = new Date().toLocaleString('en-US', {
                  timeZone: 'Asia/Ho_Chi_Minh'
              });
              return new Date(s);
          }
  
          function renderTodayTKB() {
                  const d = getVNDateObj();
                  let day = d.getDay(); // 0..6
                  const hour = d.getHours();
  
                  // n·∫øu tr∆∞·ªõc 7h th√¨ coi nh∆∞ ng√†y h√¥m tr∆∞·ªõc
                  if (hour < 7) day = (day - 1 + 7) % 7;
  
                  // logic hi·ªÉn th·ªã: Th·ª© S√°u -> hi·ªán Th·ª© B·∫£y; Ch·ªß Nh·∫≠t -> hi·ªán Th·ª© Hai; kh√°c -> ng√†y mai
                  let showDay;
                  if (day === 5) showDay = 6;
                  else if (day === 0) showDay = 1;
                  else showDay = (day + 1) % 7;
  
                  const container = document.getElementById('todayTKB');
                  let html = `<p>H√¥m nay: <strong>${dayNames[d.getDay()]}</strong>, ${d.toLocaleDateString('vi-VN')} ‚Äî Hi·ªÉn th·ªã TKB <strong>${dayNames[showDay]}</strong></p>`;
                  html += `<div class="inline-note">‚ùóL∆∞u √Ω: Sau 7:00 s√°ng TKB & l·ªãch tr·ª±c s·∫Ω chuy·ªÉn sang ng√†y ti·∫øp theo (m·ªôt v√†i quy t·∫Øc ƒë·∫∑c bi·ªát ƒë∆∞·ª£c √°p d·ª•ng).</div>`;
                  html += `<table><thead><tr><th>Ti·∫øt</th><th>M√¥n / N·ªôi dung</th></tr></thead><tbody>`;
                  (TKB[showDay] || []).forEach((m, i) => {
                      html += `<tr><td>${i+1}</td><td>${m}</td></tr>`;
                  });
                  html += `</tbody></table>`;
                  html += `<p style="margin-top:10px;"><b>L·ªãch tr·ª±c: </b> <span id="todayTruc">${truc[showDay]}</span>`;
  
                  container.innerHTML = html;
  
                  // handle edit tr·ª±c: m·ªü prompt -> l∆∞u v√†o truc v√† localStorage (ch·ªâ admin)
                  document.getElementById('editTrucBtn').addEventListener('click', () => {
                      const txt = prompt("S·ª≠a ghi ch√∫ l·ªãch tr·ª±c cho ng√†y hi·ªÉn th·ªã:", truc[showDay]);
                      if (txt !== null) {
                          truc[showDay] = txt;
                          localStorage.setItem('lichTruc', JSON.stringify(truc));
                          renderTodayTKB(); // rerender ƒë·ªÉ c·∫≠p nh·∫≠t
                      }
                  });
              }
              // full week + inline ch·ªânh tr·ª±c c·ªßa t·ª´ng ng√†y
          document.getElementById('showFullBtn').addEventListener('click', function() {
              const full = document.getElementById('fullTKB');
              if (full.style.display === 'block') {
                  full.style.display = 'none';
                  this.textContent = 'üìÖ Xem to√†n b·ªô TKB & L·ªãch tr·ª±c';
                  return;
              }
              // build full
              let html = `<div style="margin-bottom:8px;"><strong>üìÖ Th·ªùi kh√≥a bi·ªÉu c·∫£ tu·∫ßn</strong></div>`;
              for (let k = 1; k <= 6; k++) {
                  html += `<h3 style="margin:8px 0 4px;">${dayNames[k]}</h3>`;
                  html += `<table><thead><tr><th>Ti·∫øt</th><th>M√¥n</th></tr></thead><tbody>`;
                  (TKB[k] || []).forEach((m, i) => html += `<tr><td>${i+1}</td><td>${m}</td></tr>`);
                  html += `</tbody></table>`;
              }
  
              // m·ªôt b·∫£ng ri√™ng cho l·ªãch tr·ª±c
              html += `<hr style="opacity:.08;margin:12px 0;"><h3>üßπ L·ªãch tr·ª±c c·∫£ tu·∫ßn</h3>`;
              html += `<table><thead><tr><th>Ng√†y</th><th>T·ªï tr·ª±c</th></tr></thead><tbody>`;
              for (let k = 1; k <= 6; k++) {
                  html += `<tr><td>${dayNames[k]}</td><td class="editable-truc" data-day="${k}">${truc[k]}</td></tr>`;
              }
              html += `</tbody></table>`;
  
              full.innerHTML = html;
              full.style.display = 'block';
              this.textContent = '‚ùå ·∫®n to√†n b·ªô';
              // save buttons
              full.querySelectorAll('.save-truc').forEach(btn => {
                  btn.addEventListener('click', () => {
                      const day = btn.dataset.day;
                      const val = prompt("Nh·∫≠p n·ªôi dung tr·ª±c cho " + dayNames[day], truc[day]);
                      if (val !== null) {
                          truc[day] = val;
                          localStorage.setItem('lichTruc', JSON.stringify(truc));
                          renderTodayTKB();
                          // refresh full view
                          document.getElementById('showFullBtn').click();
                          document.getElementById('showFullBtn').click();
                      }
                  });
              });
          });
          // init render
          renderTodayTKB();
  
          // re-render every minute (keeps up-to-date at 7:00 change)
          setInterval(renderTodayTKB, 60 * 1000);
  
          /* -------------------------
            Small accessibility: close menu with ESC
          ------------------------- */
          window.addEventListener('keydown', (e) => {
              if (e.key === 'Escape') {
                  document.getElementById('menuPanel').style.display = 'none';
                  document.getElementById('popup').classList.remove('open');
              }
          });
  </script>
</body>

</html>
