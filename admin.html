<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - BTVN System</title>
  <link rel="stylesheet" href="admin.css"> 
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìò</text></svg>">
  <meta name="description" content="Trang qu·∫£n tr·ªã h·ªá th·ªëng B√†i T·∫≠p V·ªÅ Nh√†">
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.3/dist/umd/supabase.min.js"></script>
</head>

<script>
  const SUPABASE_URL = "https://nlmwiyoplederbthjvzz.supabase.co"; 
  const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sbXdpeW9wbGVkZXJidGhqdnp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MzYxOTEsImV4cCI6MjA3ODQxMjE5MX0.fzyVeeLaSnYJyaIv63i9C7q6C-9UqtmL1HZuNYP-FJE";
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
</script>
<script>
  const isError = false; 
  if (isError) {
    window.location.href = "bigerror1.html";
  }
</script>
<body>
  <div id="login-box" class="login-container fade-in">
    <div class="login-card">
      <h2>üîë ƒêƒÉng nh·∫≠p qu·∫£n tr·ªã</h2>
      <form id="loginForm">
        <div class="form-group">
          <label for="username">T√™n ƒëƒÉng nh·∫≠p</label>
          <input type="text" id="username" placeholder="admin" required autocomplete="username">
        </div>
        <div class="form-group">
          <label for="password">M·∫≠t kh·∫©u</label>
          <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="current-password">
        </div>
        <button type="submit" id="loginBtn" class="btn btn-primary">ƒêƒÉng nh·∫≠p</button>
      </form>
      <p id="loginMsg"></p>
    </div>
  </div>

  <div id="admin-panel" style="display:none;">
    <header class="admin-header">
      <h1>Trang Qu·∫£n Tr·ªã BTVN</h1>
      <div class="header-actions">
        <button id="darkModeToggle" class="dark-toggle" aria-label="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô s√°ng/t·ªëi">
          <span id="modeIcon">üåô</span>
        </button>
        <button id="logoutBtn" class="btn btn-danger">ƒêƒÉng xu·∫•t</button>
      </div>
    </header>

    <nav class="admin-nav">
      <button class="nav-tab active" data-tab="tab-btvn">üìù BTVN</button>
      <button class="nav-tab" data-tab="tab-tkb">üìÖ TKB</button>
      <button class="nav-tab" data-tab="tab-changelog">üìú Changelog</button>
      <button class="nav-tab" data-tab="tab-data">üìä D·ªØ li·ªáu</button>
    </nav>

    <main class="admin-content">
      
      <section id="tab-btvn" class="admin-tab-content card active fade-in">
        <h2>üìù B√†i T·∫≠p V·ªÅ Nh√†</h2>
        <form id="btvnForm">
          <div class="form-group">
            <label for="subject">M√¥n h·ªçc</label>
            <select id="subject" required>
              <option value="">-- Ch·ªçn m√¥n h·ªçc --</option>
              <option value="To√°n h·ªçc - ƒê·∫°i s·ªë">To√°n h·ªçc - ƒê·∫°i s·ªë</option>
              <option value="To√°n h·ªçc - H√¨nh h·ªçc">To√°n h·ªçc - H√¨nh h·ªçc</option>
              <option value="Ng·ªØ vƒÉn">Ng·ªØ vƒÉn</option>
              <option value="Ti·∫øng Anh">Ti·∫øng Anh</option>
              <option value="V·∫≠t l√Ω">V·∫≠t l√Ω</option>
              <option value="H√≥a h·ªçc">H√≥a h·ªçc</option>
              <option value="Sinh h·ªçc">Sinh h·ªçc</option>
              <option value="L·ªãch s·ª≠">L·ªãch s·ª≠</option>
              <option value="ƒê·ªãa l√≠">ƒê·ªãa l√≠</option>
              <option value="GDCD">GDCD</option>
              <option value="Tin h·ªçc">Tin h·ªçc</option>
              <option value="C√¥ng ngh·ªá">C√¥ng ngh·ªá</option>
              <option value="GDTC">GDTC</option>
              <option value="GDƒêP">GDƒêP</option>
              <option value="Mƒ© thu·∫≠t">Mƒ© thu·∫≠t</option>
              <option value="√Çm nh·∫°c">√Çm nh·∫°c</option>
              <option value="HƒêTN">HƒêTN</option>
            </select>
          </div>
          <div class="form-group">
            <label for="btvn_content">N·ªôi dung</label>
            <textarea id="btvn_content" placeholder="N·ªôi dung b√†i t·∫≠p" rows="4" required></textarea>
          </div>
          <div class="btn-group">
            <button type="button" id="updateBTVN" class="btn btn-primary">‚ûï Th√™m m·ªõi</button>
            <button type="button" id="addNewBTVN" class="btn btn-success">üîÅ C·∫≠p nh·∫≠t (ghi ƒë√®)</button>
          </div>
        </form>
      </section>

      <section id="tab-tkb" class="admin-tab-content card fade-in">
        <h2>üìÖ Th·ªùi Kho√° Bi·ªÉu</h2>
        <form id="tkbForm">
          
          <div class="tkb-controls">
            <div class="form-group">
              <label for="tkb_day">Ch·ªçn th·ª©</label>
              <select id="tkb_day" required>
                <option value="">-- Ch·ªçn th·ª© --</option>
                <option value="1">Th·ª© 2</option>
                <option value="2">Th·ª© 3</option>
                <option value="3">Th·ª© 4</option>
                <option value="4">Th·ª© 5</option>
                <option value="5">Th·ª© 6</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="tkb_truc">T·ªï tr·ª±c trong ng√†y</label>
              <select id="tkb_truc" required>
                <option value="">-- Ch·ªçn t·ªï tr·ª±c --</option>
                <option value="T·ªï 1">T·ªï 1</option>
                <option value="T·ªï 2">T·ªï 2</option>
                <option value="T·ªï 3">T·ªï 3</option>
                <option value="T·ªï 4">T·ªï 4</option>
              </select>
            </div>
            
            <button type="button" id="updateTrucOnly" class="btn btn-warning">
              C·∫≠p nh·∫≠t (ch·ªâ) T·ªï Tr·ª±c
            </button>
          </div>

          <div class="tkb-grid">
            <div class="tkb-session">
              <h3>Bu·ªïi S√°ng</h3>
              <div id="tkb-sang-container" class="tkb-period-list">
                </div>
            </div>
            <div class="tkb-session">
              <h3>Bu·ªïi Chi·ªÅu</h3>
              <div id="tkb-chieu-container" class="tkb-period-list">
                </div>
            </div>
          </div>

          <div class="tkb-actions">
            <button type="button" id="updateTKB" class="btn btn-primary">üîÅ C·∫≠p nh·∫≠t TKB (Ghi ƒë√®)</button>
          </div>
        </form>
      </section>

      <section id="tab-changelog" class="admin-tab-content card fade-in">
        <h2>üìú C·∫≠p nh·∫≠t thay ƒë·ªïi</h2>
        <form id="changelogForm">
          <div class="form-group">
            <label for="changelog_text">N·ªôi dung changelog</label>
            <textarea id="changelog_text" placeholder="Nh·∫≠p n·ªôi dung changelog..." rows="4" required></textarea>
          </div>
          <div class="btn-group">
            <button type="button" id="updateChangelog" class="btn btn-primary">üîÅ Ghi ƒë√® (Kh√¥ng x√≥a)</button>
            <button type="button" id="addNewChangelog" class="btn btn-success">‚ûï Th√™m (X√≥a c≈©)</button>
          </div>
        </form>
      </section>

      <section id="tab-data" class="admin-tab-content card fade-in">
        <h2>üìä Xem d·ªØ li·ªáu</h2>
        <button id="refreshData" class="btn btn-secondary">T·∫£i l·∫°i</button>
        <pre id="dataViewer" class="data-viewer">(ch∆∞a t·∫£i)</pre>
      </section>

    </main>
  </div>

  <script>
    window.isLoading = false;
  </script>
  <script src="admin.js" defer></script>
</body>
</html>